<!DOCTYPE html>
<html>
<head>
<title>i need a good title</title>
<script src="https://peterolson.github.com/BigInteger.js/BigInteger.min.js"></script>
<script>
    function escapeHtml(text) {
      var map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
      };

      return text.replace(/[&<>"']/g, function(m) { return map[m]; });
    }
    function rsa(){
        try{
            var vars={
                n:document.forms["rsa"]["n"].value,
                e:document.forms["rsa"]["e"].value,
                c:document.forms["rsa"]["c"].value,
                d:document.forms["rsa"]["d"].value,
                p:document.forms["rsa"]["p"].value,
                q:document.forms["rsa"]["q"].value
            };
            for(var i in vars){if(vars[i]==""){delete vars[i];}else{vars[i]=bigInt(vars[i]);}}
            // todo: get factor tables
            
            //error checking
            if(!vars.c)
            if(vars.p&&vars.q&&vars.n&&vars.p.multiply(vars.q).neq(vars.n)){throw ("inconsistency between p, q, and n");}
            if(vars.d&&vars.e&&vars.n&&bigInt(3).modPow(vars.d.multiply(vars.e),vars.n).neq(bigInt(3))){throw ("inconsistency between d and e");}
            
            //computation
            if(vars.p&&vars.q){
                if(vars.e){
                    //
                }
                if(vars.d){
                    //
                }
            }
            else if(vars.n&&vars.p){

            }
            else if(vars.n&&vars.q){

            }
            else if(vars.n){

            }
            else{

            }
        }
        catch(e){
            console.log(e);
            document.getElementbyId("result").innerHTML+="Something went wrong. :(<br>"+escapeHTML(e);
        }
    }
</script>
</head>
<body>
<p>if you want inputs to be hex put 0x before it, if you want it to be binary put 0b before it</p>
<form name="rsa" onsubmit="return rsa()">
    <p>n: <input name="n"></p>
    <p>e: <input name="e"></p>
    <p>c: <input name="c"></p>
    <p>d: <input name="d"></p>
    <p>p: <input name="p"></p>
    <p>q: <input name="q"></p>
    <p><input type="submit" value="Submit"></p>
</form>
<div id="result"></div>
</body>
</html>
